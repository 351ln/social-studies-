<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ç’°ä¿GOçœŸï½œè§£æ§‹ç¶ è‰²ç¥è©±</title>
    <style>
      :root{
        --bg:#f8fafc;
        --card:#ffffff;
        --text:#0f172a;
        --muted:#475569;
        --line:#e2e8f0;
        --accent:#2563eb;
        --accent2:#16a34a;
        --warn:#f59e0b;
        --bad:#ef4444;
        --shadow: 0 10px 30px rgba(2,6,23,.08);
        --r: 16px;
      }
      *{ box-sizing:border-box; }
      body{
        margin:0;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          "PingFang TC","Noto Sans TC","Microsoft JhengHei", sans-serif;
        background:var(--bg);
        color:var(--text);
      }
      a{ color:inherit; }
      .wrap{
        max-width: 1040px;
        margin: 0 auto;
        padding: 24px 16px 64px;
      }
      .hero{
        background: linear-gradient(135deg, rgba(37,99,235,.12), rgba(22,163,74,.10));
        border: 1px solid var(--line);
        border-radius: calc(var(--r) + 6px);
        padding: 22px 18px;
        box-shadow: var(--shadow);
      }
      .hero h1{
        margin: 0 0 6px;
        font-size: 22px;
        letter-spacing: .2px;
      }
      .hero p{
        margin: 0;
        color: var(--muted);
        line-height: 1.65;
        font-size: 14px;
      }
      .chips{ margin-top: 10px; display:flex; gap:8px; flex-wrap:wrap; }
      .chip{
        font-size:12px;
        padding: 6px 10px;
        border-radius: 999px;
        border: 1px solid var(--line);
        background:#fff;
        color: var(--muted);
      }
      .tabs{
        margin-top: 14px;
        display:flex;
        gap:10px;
        flex-wrap: wrap;
      }
      .tab{
        border: 1px solid var(--line);
        background: var(--card);
        border-radius: 999px;
        padding: 10px 14px;
        font-size: 14px;
        cursor: pointer;
        user-select:none;
        transition: .15s ease;
      }
      .tab:hover{ transform: translateY(-1px); }
      .tab[aria-selected="true"]{
        border-color: rgba(37,99,235,.35);
        background: rgba(37,99,235,.10);
        color: #0b2a7a;
        font-weight: 700;
      }

      .panel{
        margin-top: 14px;
        background: var(--card);
        border: 1px solid var(--line);
        border-radius: var(--r);
        box-shadow: var(--shadow);
        overflow:hidden;
      }
      .panelHead{
        padding: 14px 16px;
        border-bottom: 1px solid var(--line);
        display:flex;
        justify-content: space-between;
        gap: 12px;
        flex-wrap: wrap;
        align-items: center;
      }
      .panelHead h2{
        margin:0;
        font-size: 16px;
      }
      .badge{
        font-size: 12px;
        padding: 6px 10px;
        border-radius: 999px;
        border: 1px solid var(--line);
        color: var(--muted);
        background: #fff;
      }
      .content{
        padding: 16px;
        line-height: 1.75;
        font-size: 14px;
      }

      .grid{
        display:grid;
        grid-template-columns: 1fr;
        gap: 12px;
      }
      @media (min-width: 860px){
        .grid{ grid-template-columns: 1fr 1fr; }
      }
      .card{
        border: 1px solid var(--line);
        border-radius: 14px;
        padding: 14px 14px 12px;
        background: #fff;
      }
      .card h3{
        margin: 0 0 6px;
        font-size: 14px;
      }
      .card p{
        margin:0;
        color: var(--muted);
        font-size: 13px;
        line-height: 1.65;
      }

      .block{
        border: 1px solid var(--line);
        border-radius: 14px;
        padding: 14px;
        background: #fff;
        margin-top: 12px;
      }
      .block h3{
        margin: 0 0 10px;
        font-size: 14px;
      }
      .k{
        display:inline-block;
        font-size: 12px;
        padding: 3px 8px;
        border-radius: 999px;
        border: 1px solid var(--line);
        margin-right: 6px;
        margin-bottom: 6px;
        background:#fff;
        color: var(--muted);
      }
      ul{ margin: 8px 0 0 18px; padding:0; }
      li{ margin: 6px 0; }
      .mini{
        font-size: 12px;
        color: var(--muted);
      }
      .divider{
        height:1px;
        background: var(--line);
        margin: 12px 0;
      }

      .btnrow{
        display:flex;
        gap:10px;
        flex-wrap: wrap;
        margin-top: 10px;
      }
      .btn{
        display:inline-flex;
        align-items:center;
        gap:8px;
        border:1px solid var(--line);
        background:#fff;
        padding:9px 12px;
        border-radius: 12px;
        cursor:pointer;
        font-size: 13px;
        color: var(--text);
      }
      .btn:hover{ transform: translateY(-1px); }
      .btnPrimary{
        border-color: rgba(22,163,74,.35);
        background: rgba(22,163,74,.10);
      }
      .btnAccent{
        border-color: rgba(37,99,235,.35);
        background: rgba(37,99,235,.10);
      }
      .btnWarn{
        border-color: rgba(245,158,11,.35);
        background: rgba(245,158,11,.12);
      }
      .btnBad{
        border-color: rgba(239,68,68,.35);
        background: rgba(239,68,68,.10);
      }

      .hidden{ display:none !important; }

      textarea, input, select{
        width: 100%;
        border: 1px solid var(--line);
        border-radius: 12px;
        padding: 10px 12px;
        font-size: 14px;
        background: #fff;
        color: var(--text);
        outline: none;
      }
      textarea{ min-height: 120px; resize: vertical; }

      .two{
        display:grid;
        grid-template-columns: 1fr;
        gap: 12px;
      }
      @media (min-width: 860px){
        .two{ grid-template-columns: 1fr 1fr; }
      }

      .pill{
        display:inline-flex;
        align-items:center;
        gap:8px;
        border:1px solid var(--line);
        padding: 6px 10px;
        border-radius: 999px;
        background:#fff;
        color: var(--muted);
        font-size: 12px;
      }

      .result{
        border: 1px dashed var(--line);
        background: #f1f5f9;
        border-radius: 14px;
        padding: 12px;
        font-size: 14px;
      }
      .result b{ color: var(--text); }
      .footer{
        margin-top: 14px;
        color: var(--muted);
        font-size: 12px;
        text-align:center;
      }

      .flowline{
        display:flex;
        flex-wrap:wrap;
        gap:10px;
        align-items:center;
      }
      .step{
        border:1px solid var(--line);
        background:#fff;
        border-radius: 999px;
        padding: 8px 12px;
        font-size: 13px;
      }
      .arrow{
        color: var(--muted);
        font-size: 16px;
      }

      .linkbox a{
        color: #0b2a7a;
        text-decoration: underline;
        text-underline-offset: 3px;
      }

      /* -------------------------------
         è‡ªå­¸é—–é—œ UIï¼ˆæ–°å¢ï¼‰
      --------------------------------*/
      .questTop{
        display:flex;
        justify-content: space-between;
        align-items: center;
        gap: 10px;
        flex-wrap: wrap;
      }
      .progressBar{
        height: 10px;
        width: 100%;
        border-radius: 999px;
        background: #eef2f7;
        overflow:hidden;
        border: 1px solid var(--line);
      }
      .progressFill{
        height: 100%;
        width: 0%;
        background: #0f172a;
      }
      .questGrid{
        display:grid;
        grid-template-columns: 1fr;
        gap: 12px;
        margin-top: 12px;
      }
      @media (min-width: 860px){
        .questGrid{ grid-template-columns: 1fr 1fr; }
      }
      .questCard{
        border: 1px solid var(--line);
        border-radius: 14px;
        background: #fff;
        padding: 14px;
        transition: .15s ease;
      }
      .questCard:hover{ transform: translateY(-1px); }
      .questCard.locked{
        background: #f8fafc;
        opacity: .65;
      }
      .questHead{
        display:flex;
        justify-content: space-between;
        gap: 10px;
        flex-wrap: wrap;
        align-items:center;
      }
      .questTitle{
        font-weight: 800;
        font-size: 14px;
      }
      .tag{
        font-size: 12px;
        padding: 5px 10px;
        border-radius: 999px;
        border: 1px solid var(--line);
        background:#fff;
        color: var(--muted);
      }
      .tag.ok{ border-color: rgba(22,163,74,.35); background: rgba(22,163,74,.10); color:#14532d; }
      .tag.go{ border-color: rgba(37,99,235,.35); background: rgba(37,99,235,.10); color:#0b2a7a; }
      .tag.lock{ border-color: rgba(148,163,184,.5); background: rgba(148,163,184,.10); color:#475569; }
      .questBtns{ display:flex; gap:10px; flex-wrap: wrap; margin-top: 10px; }
      .panelMini{
        border:1px solid var(--line);
        background:#f8fafc;
        border-radius: 14px;
        padding: 12px;
        margin-top: 12px;
      }
      .panelMini b{ color: var(--text); }
    </style>
  </head>

  <body>
    <div class="wrap">
      <div class="hero">
        <h1>ç’°ä¿GOçœŸï½œè§£æ§‹ç¶ è‰²ç¥è©±</h1>
        <p>
          ä»¥äº”å¹´ç´šå­¸ç”Ÿçš„ç”Ÿæ´»ç¶“é©—ç‚ºèµ·é»ï¼Œé€éã€Œæ¶ˆè²»é¸æ“‡ã€èˆ‡ã€Œç’°ä¿å®£ç¨±æ¡ˆä¾‹ã€ï¼Œ
          å¼•å°å­¸ç”Ÿå­¸ç¿’<strong>è§£æ§‹ç¶ è‰²ç¥è©±</strong>ï¼šè¾¨è­˜å®£ç¨±ã€æå‡ºå¯æª¢æ ¸çš„å•é¡Œã€æ¯”è¼ƒå¤šå…ƒè³‡è¨Šï¼Œ
          åœ¨è³‡è¨Šä¸è¶³æ™‚ä¿ç•™æš«æ™‚æ€§çµè«–ï¼Œä¸¦è¦åŠƒå¯è¡Œçš„å°è¡Œå‹•ã€‚
        </p>
        <div class="chips">
          <span class="chip">#åª’é«”ç´ é¤Š</span>
          <span class="chip">#æ¶ˆè²»æ±ºç­–</span>
          <span class="chip">#ç³»çµ±æ€è€ƒ</span>
          <span class="chip">#å°çµ„æ¢ç©¶</span>
        </div>

        <div class="tabs" role="tablist" aria-label="ç¶²ç«™åˆ†é ">
          <button class="tab" role="tab" id="tab-lesson" aria-controls="panel-lesson" aria-selected="true">
            æ•™å­¸æµç¨‹æ¦‚è¦½
          </button>
          <button class="tab" role="tab" id="tab-self" aria-controls="panel-self" aria-selected="false">
            è‡ªå­¸èª²ç¨‹è¨­è¨ˆ
          </button>
          <button class="tab" role="tab" id="tab-draw" aria-controls="panel-draw" aria-selected="false">
            æŠ½ç±¤ç³»çµ±
          </button>
          <button class="tab" role="tab" id="tab-resources" aria-controls="panel-resources" aria-selected="false">
            è³‡æºèˆ‡é™„ä»¶
          </button>
        </div>
      </div>

      <!-- Panel: Lesson (ä½ çš„åŸå…§å®¹ä¿ç•™) -->
      <section class="panel" id="panel-lesson" role="tabpanel" aria-labelledby="tab-lesson">
        <!-- ===== é€™ä¸€æ®µä»¥ä¸‹å®Œå…¨ä¿ç•™ä½ åŸæœ¬çš„æ•™æ¡ˆ/æŠ½ç±¤/é™„ä»¶å…§å®¹ ===== -->
        <div class="panelHead">
          <h2>æ•™æ¡ˆï½œå…©ç¯€èª²ï¼ˆ40 åˆ†é˜ Ã— 2ï¼‰</h2>
          <span class="badge">æ¶æ§‹ï¼šå¼•èµ·å‹•æ©Ÿ 5 åˆ†ï½œç™¼å±•æ´»å‹• 30 åˆ†ï½œç¶œåˆæ´»å‹• 5 åˆ†</span>
        </div>

        <div class="content">
          <div class="block">
            <h3>è¨­è¨ˆä¾æ“šï¼ˆæ‘˜è¦ï¼‰</h3>
            <div class="mini">
              â€¢ èƒ½å¾ç”Ÿæ´»æƒ…å¢ƒè§€å¯Ÿä¸¦æè¿°æ¶ˆè²»è¡Œç‚ºèˆ‡å¯èƒ½å½±éŸ¿<br/>
              â€¢ èƒ½é‡å°åª’é«”/å•†å“å®£ç¨±æå‡ºå•é¡Œï¼Œä¸¦ä»¥å¤šå…ƒè³‡è¨Šé€²è¡Œåˆ¤æ–·<br/>
              â€¢ èƒ½èªªå‡ºè§€é»èˆ‡ç†ç”±ï¼Œä¸¦é¡˜æ„åœ¨è³‡è¨Šä¸è¶³æ™‚ä¿ç•™æš«æ™‚æ€§çµè«–
            </div>
            <div class="divider"></div>
            <div class="mini">
              æ ¸å¿ƒç´ é¤Šï¼šç¤¾æœƒé ˜åŸŸï¼ˆäººé¡æ´»å‹•èˆ‡ç’°å¢ƒé—œè¯ã€ç†æ€§æ€è€ƒã€è² è²¬ä»»è¡Œå‹•ï¼‰ï¼›
              ç¸½ç¶±ï¼ˆA2 ç³»çµ±æ€è€ƒã€B1 æºé€šè¡¨é”ã€C1 å…¬æ°‘æ„è­˜ï¼‰
            </div>
          </div>

          <div class="block">
            <h3>å­¸ç¿’ç›®æ¨™</h3>
            <ul>
              <li>èƒ½å¾ç”Ÿæ´»æ¶ˆè²»æƒ…å¢ƒä¸­èªªå‡ºå€‹äººé¸æ“‡çš„åŸå› ã€‚</li>
              <li>èƒ½è¾¨è­˜åª’é«”æˆ–å•†å“ä¸­çš„ç’°ä¿å®£ç¨±ï¼Œä¸¦æå‡ºå¯æª¢æ ¸çš„å•é¡Œã€‚</li>
              <li>èƒ½æ¯”è¼ƒä¸åŒè³‡è¨Šå¾Œï¼Œå½¢æˆæœ‰ç†ç”±çš„æš«æ™‚æ€§åˆ¤æ–·ã€‚</li>
              <li>èƒ½åæ€è‡ªèº«æ¶ˆè²»è¡Œç‚ºï¼Œä¸¦å˜—è©¦è¦åŠƒå¯è¡Œçš„å°è¡Œå‹•ã€‚</li>
            </ul>
          </div>

          <!-- Lesson 1 -->
          <div class="panel" style="margin-top:12px;">
            <div class="panelHead">
              <h2>ç¬¬ä¸€ç¯€èª²ï½œæ¶ˆè²»é¸æ“‡èˆ‡ç’°å¢ƒçš„é—œè¯</h2>
              <span class="badge">ç¬¬ 1 ç¯€</span>
            </div>
            <div class="content">
              <div class="grid">
                <div class="card">
                  <h3>å¼•èµ·å‹•æ©Ÿï¼ˆç´„ 5 åˆ†é˜ï¼‰</h3>
                  <p>
                    æ•™å¸«æå•ï¼šã€Œå¦‚æœä»Šå¤©ä½ æ‰‹ä¸Šæœ‰ <b>30ï½50 å…ƒ</b>ï¼Œè€Œä¸”æ˜¯åœ¨ä¸‹èª²æˆ–æ”¾å­¸è·¯ä¸Šï¼Œä½ æœƒæ€éº¼ç”¨ï¼Ÿã€
                    è®“å­¸ç”Ÿåˆ†äº«é¸æ“‡èˆ‡ç†ç”±ï¼ˆä¸é è¨­å­¸ç”Ÿæœ‰èŠ±é 100 å…ƒç¶“é©—ï¼‰ã€‚
                  </p>
                </div>
                <div class="card">
                  <h3>ç¶œåˆæ´»å‹•ï¼ˆç´„ 5 åˆ†é˜ï¼‰</h3>
                  <p>
                    æ•™å¸«çµ±æ•´ï¼šæ¶ˆè²»ä¸åªæ˜¯è²·æ±è¥¿ï¼Œä¹Ÿæ˜¯åƒ¹å€¼é¸æ“‡ã€‚å¯ç”¨å¥å‹æ”¶æŸï¼š<br/>
                    ã€Œæˆ‘ç™¼ç¾ï¼ŒåŸä¾†èŠ±éŒ¢ä¸åªæ˜¯è²·æ±è¥¿ï¼Œé‚„æ˜¯åœ¨ï¼¿ï¼¿ï¼¿ï¼¿ã€‚ã€
                  </p>
                </div>
              </div>

              <div class="block">
                <h3>ç™¼å±•æ´»å‹•ï¼ˆç´„ 30 åˆ†é˜ï¼‰</h3>
                <ul>
                  <li><b>é›¶ç”¨éŒ¢æ¶ˆè²»æ¦‚è¦½ï¼ˆå¯æ¡†å®šä¸€é€±ï¼‰</b>ï¼šå­¸ç”Ÿå¡«å­¸ç¿’å–®ï¼Œå‹¾é¸æ¶ˆè²»æ™‚åˆ»ä¸¦èªªæ˜åŸå› ï¼›å°çµ„è¨è«–å‹•æ©Ÿï¼ˆéœ€è¦/æƒ³è¦ã€ä¾¿åˆ©/å–œå¥½ï¼‰ã€‚</li>
                  <li><b>ä¸‰å¼µæ¶ˆè²»å¡ï¼šé¸ä½ æ”¯æŒèª°</b>ï¼šæ¯çµ„ 3 å¼µå¡ï¼ˆä¸€æ¬¡å°±ä¸Ÿ / é‡è¤‡ä½¿ç”¨ / å…ˆä¸è²·ï¼‰ï¼Œè¨è«–æ¯å€‹é¸æ“‡èƒŒå¾Œæ„æ¶µã€‚</li>
                  <li><b>ç†è²¡ Ã— æ°¸çºŒå¤©ç§¤</b>ï¼šç”¨ã€Œè‡ªå·±ï¼ˆæ–¹ä¾¿/ä¾¿å®œ/å–œå¥½ï¼‰ã€èˆ‡ã€Œç’°å¢ƒï¼ˆè³‡æº/åƒåœ¾/èƒ½æºï¼‰ã€æ•´ç†æ¬Šè¡¡ï¼Œç·´ç¿’èªªæ˜ç†ç”±ã€‚</li>
                </ul>
                <div class="divider"></div>
                <div class="mini">
                  æ”¶æŸèªï¼ˆå¯æ”¾æŠ•å½±ç‰‡ï¼‰ï¼š<b>éŒ¢æ€éº¼èŠ±ï¼Œå°±æ˜¯æˆ‘å€‘æƒ³æ”¯æŒä»€éº¼æ¨£çš„ç”Ÿç”¢è¡Œç‚ºã€‚</b>
                </div>
              </div>
            </div>
          </div>

          <!-- Lesson 2 -->
          <div class="panel" style="margin-top:12px;">
            <div class="panelHead">
              <h2>ç¬¬äºŒç¯€èª²ï½œç’°ä¿å®£ç¨±æ˜¯çœŸçš„å—ï¼Ÿï¼ˆå›æ”¶ç³»çµ±è¦–è§’ï¼‰</h2>
              <span class="badge">ç¬¬ 2 ç¯€</span>
            </div>

            <div class="content">
              <div class="grid">
                <div class="card">
                  <h3>å¼•èµ·å‹•æ©Ÿï¼ˆç´„ 5 åˆ†é˜ï¼‰</h3>
                  <p>
                    æ•™å¸«æå•ï¼šã€Œç‚ºä»€éº¼å¤§å®¶éƒ½è²·ç’°ä¿æ¯ï¼Ÿã€è«‹å­¸ç”Ÿåˆ†äº«åŸå› ï¼ˆæ–¹ä¾¿ã€æµè¡Œã€è¦ºå¾—æ¯”è¼ƒç’°ä¿ç­‰ï¼‰ï¼Œ
                    å†è¿½å•ï¼š<b>å®ƒç‚ºä»€éº¼è¢«èªªæˆç’°ä¿ï¼Ÿæˆ‘å€‘çŸ¥é“å®Œæ•´è³‡è¨Šå—ï¼Ÿ</b>
                  </p>
                </div>
                <div class="card">
                  <h3>ç¶œåˆæ´»å‹•ï¼ˆç´„ 5 åˆ†é˜ï¼‰</h3>
                  <p>
                    æ•™å¸«æŒ‡æ´¾å›å®¶ä½œæ¥­ï¼šé–±è®€ä¸€ç¯‡ç’°ä¿æ–‡ç« å¾Œæ’°å¯«å¿ƒå¾—ï¼›ä¸¦è¨˜éŒ„ä¸€æ¬¡è‡ªå·±çš„æ¶ˆè²»é¸æ“‡ï¼ˆè²·/ä¸è²·/éœ€è¦æ›´å¤šè³‡è¨Šï¼‰èˆ‡ç†ç”±ã€‚
                  </p>
                </div>
              </div>

              <div class="block">
                <h3>ç™¼å±•æ´»å‹•ï¼ˆç´„ 30 åˆ†é˜ï¼‰ï½œç’°ä¿çš„çœŸç›¸ï¼šå›æ”¶ç³»çµ±èƒ½ä¸èƒ½è™•ç†ï¼Ÿ</h3>

                <div class="two">
                  <div class="card">
                    <h3>æ´»å‹•ä¸€ï½œå¡ç‰Œåˆ†é¡ï¼šç‰©å“å¡ Ã— ç³»çµ±åˆ¤æ–·å¡ï¼ˆç´„ 15 åˆ†ï¼‰</h3>
                    <p class="mini" style="margin-top:6px;">
                      ç›®æ¨™ï¼šæŠŠã€Œæè³ªå¥½å£ã€è½‰æˆã€Œå›æ”¶ç³»çµ±èƒ½ä¸èƒ½è™•ç†ã€çš„ç³»çµ±æ€è€ƒã€‚
                    </p>
                    <ul>
                      <li>æ¯çµ„ç™¼ä¸€çµ„ã€Œç‰©å“å¡ã€ï¼‹ã€Œç³»çµ±åˆ¤æ–·å¡ã€</li>
                      <li>å­¸ç”ŸæŠŠç‰©å“å¡æ”¾åˆ°å°æ‡‰å€ï¼Œ<b>ä¸¦æ›¸å¯«ç†ç”±</b></li>
                      <li>æ•™å¸«æ‹†è§£é‡é»ï¼š<br/>
                        ã€Œå¡‘è† å¸ç®¡çš„å•é¡Œï¼Œä¸åªæ˜¯å®ƒæ˜¯å¡‘è† ï¼Œè€Œæ˜¯å®ƒå¤ªå°ã€å¤ªè¼•ã€å¤ªå®¹æ˜“è¢«å¿½ç•¥ï¼Œå›æ”¶ç³»çµ±å¾ˆé›£æœ‰æ•ˆè™•ç†å®ƒã€‚ã€</li>
                    </ul>

                    <div class="divider"></div>
                    <div class="mini"><b>ç‰©å“å¡</b>ï¼šå¡‘è† å¸ç®¡ï¼å¡‘è† ç“¶ï¼ç´™å¸ç®¡ï¼é‹ç½</div>
                    <div class="mini" style="margin-top:6px;"><b>ç³»çµ±åˆ¤æ–·å¡</b>ï¼š</div>
                    <div class="mini">âœ” å›æ”¶ç³»çµ±å®¹æ˜“è™•ç†</div>
                    <div class="mini">â–³ æŠ€è¡“ä¸Šå¯å›æ”¶ï¼Œä½†æˆæœ¬é«˜</div>
                    <div class="mini">âœ˜ å¹¾ä¹é€²ä¸äº†å›æ”¶ç³»çµ±</div>
                  </div>

                  <div class="card" id="flow">
                    <h3>æ´»å‹•äºŒï½œæµç¨‹ç·šï¼šä¸€æ ¹å¸ç®¡é€²å›æ”¶ç³»çµ±ï¼Œæœƒç™¼ç”Ÿä»€éº¼äº‹ï¼Ÿï¼ˆç´„ 15 åˆ†ï¼‰</h3>
                    <p class="mini" style="margin-top:6px;">
                      ç›®æ¨™ï¼šç†è§£ã€Œä¸æ˜¯ä¸èƒ½å›æ”¶ï¼Œè€Œæ˜¯ç³»çµ±ä¸ä¸€å®šèƒ½æœ‰æ•ˆè™•ç†ã€ã€‚
                    </p>

                    <div class="flowline" aria-label="å›æ”¶æµç¨‹ç·šç¤ºæ„">
                      <span class="step">ä½¿ç”¨</span><span class="arrow">â†’</span>
                      <span class="step">ä¸Ÿæ£„</span><span class="arrow">â†’</span>
                      <span class="step">æ¸…æ½”</span><span class="arrow">â†’</span>
                      <span class="step">åˆ†é¡</span><span class="arrow">â†’</span>
                      <span class="step">æ©Ÿæ¢°è™•ç†</span><span class="arrow">â†’</span>
                      <span class="step">å†è£½</span>
                    </div>

                    <div class="divider"></div>

                    <ul>
                      <li>å°çµ„åœ¨æ¯å€‹ç’°ç¯€è²¼ä¾¿åˆ©è²¼ï¼šå¡‘è† å¸ç®¡å¯èƒ½é‡åˆ°ä»€éº¼å›°é›£ï¼Ÿç‚ºä»€éº¼ï¼Ÿ</li>
                      <li>æ•™å¸«èªªæ˜ï¼š<b>ã€Œæœ‰äº›æ±è¥¿ä¸æ˜¯ä¸èƒ½å›æ”¶ï¼Œè€Œæ˜¯å›æ”¶ç³»çµ±æ²’æœ‰è¾¦æ³•æœ‰æ•ˆè™•ç†å®ƒã€‚ã€</b></li>
                    </ul>

                    <div class="btnrow">
                      <button class="btn btnAccent" id="btn-copy-flow">è¤‡è£½æµç¨‹ç·šæ–‡å­—</button>
                      <button class="btn btnPrimary" id="btn-jump-draw">å»æŠ½ç±¤ç³»çµ±åˆ†çµ„</button>
                    </div>

                    <div class="result" id="flow-copy-result" style="margin-top:10px; display:none;"></div>
                  </div>
                </div>

                <div class="divider"></div>
                <div class="mini">
                  é€™ä¸€ç¯€çš„é—œéµä¸æ˜¯ã€Œç´™ vs å¡‘è† èª°æ¯”è¼ƒå¥½ã€ï¼Œè€Œæ˜¯ç·´ç¿’ï¼š<b>å®£ç¨±æ˜¯å¦è·³éé—œéµç’°ç¯€ï¼Ÿæˆ‘å€‘æ˜¯å¦ç”¨åˆ¶åº¦/ç³»çµ±è§’åº¦è£œé½Šè¢«çœç•¥çš„è³‡è¨Šï¼Ÿ</b>
                </div>
              </div>
            </div>
          </div>

          <div class="footer">Â© ç’°ä¿GOçœŸï½œè§£æ§‹ç¶ è‰²ç¥è©±ï¼ˆæ•™æ¡ˆç¶²ç«™ï¼‰</div>
        </div>
      </section>

      <!-- Panel: Selfï¼ˆæ”¹æˆé—–é—œï¼Œä½†ä»åœ¨åŒä¸€é ç±¤ï¼‰ -->
      <section class="panel hidden" id="panel-self" role="tabpanel" aria-labelledby="tab-self">
        <div class="panelHead">
          <h2>è‡ªå­¸é—–é—œç³»çµ±ï¼ˆå®Œæˆä¸€é—œè§£é–ä¸‹ä¸€é—œï¼‰</h2>
          <span class="badge">çœ‹å®£ç¨± â†’ æ‰¾è­‰æ“š â†’ è£œæ¼é» â†’ æš«æ™‚çµè«– â†’ å°è¡Œå‹•</span>
        </div>

        <div class="content">
          <div class="block">
            <div class="questTop">
              <div>
                <div style="font-weight:800;">é—–é—œé€²åº¦</div>
                <div class="mini">å·²å®Œæˆ <b id="q-done">0</b> / <span id="q-total">5</span> é—œ</div>
              </div>
              <div class="btnrow" style="margin-top:0;">
                <button class="btn btnWarn" id="q-reset">é‡ç½®é€²åº¦</button>
              </div>
            </div>
            <div class="progressBar" style="margin-top:10px;">
              <div class="progressFill" id="q-bar"></div>
            </div>
            <div class="mini" style="margin-top:10px;">
              è¦å‰‡ï¼š<b>å®Œæˆä¸€é—œæ‰èƒ½è§£é–ä¸‹ä¸€é—œ</b>ã€‚é€²åº¦æœƒè‡ªå‹•è¨˜ä½ï¼ˆåŒä¸€å°é›»è…¦/åŒä¸€å€‹ç€è¦½å™¨ï¼‰ã€‚
            </div>
          </div>

          <div class="questGrid" id="questGrid"></div>

          <div class="block">
            <h3>ä»»å‹™é¢æ¿ï¼ˆçµ¦å­¸ç”Ÿç›´æ¥æŠ„é€™å¥å‹äº¤ä½œæ¥­ï¼‰</h3>
            <div class="panelMini">
              <div class="mini">
                <b>æš«æ™‚çµè«–å¥å‹ï¼š</b>
                æˆ‘ç›®å‰è¦ºå¾—ï¼¿ï¼¿ï¼¿ï¼Œå› ç‚ºï¼¿ï¼¿ï¼¿ï¼›ä½†æˆ‘é‚„æƒ³çŸ¥é“ï¼¿ï¼¿ï¼¿ã€‚
              </div>
              <div class="divider"></div>
              <div class="mini">
                <b>è‡ªå­¸äº¤ä½œæ¥­ï¼ˆå»ºè­°ï¼‰</b>
                <ul>
                  <li>âœ… ä¸€å¥è©±å¯«å‡ºå®£ç¨±ä¸»å¼µ</li>
                  <li>âœ… è‡³å°‘ 2 å€‹å¯æª¢æ ¸å•é¡Œ</li>
                  <li>âœ… è‡³å°‘ 1 å‰‡è³‡è¨Šï¼‹å¯ä¿¡åº¦ç°¡è©•</li>
                  <li>âœ… æš«æ™‚çµè«–ï¼ˆå«ã€Œæˆ‘é‚„æƒ³çŸ¥é“ã€ï¼‰</li>
                  <li>âœ… 1 é€±å°è¡Œå‹•ï¼ˆå¯å®Œæˆã€å¯è¿½è¹¤ï¼‰</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="footer">æç¤ºï¼šé€™ä¸€é åªæ–°å¢ã€Œé—–é—œ UIã€ï¼Œä¸å½±éŸ¿ä½ çš„æ•™æ¡ˆæ¦‚è¦½/æŠ½ç±¤/é™„ä»¶ã€‚</div>
        </div>
      </section>

      <!-- Panel: Drawï¼ˆä½ çš„åŸå…§å®¹ä¿ç•™ï¼‰ -->
      <section class="panel hidden" id="panel-draw" role="tabpanel" aria-labelledby="tab-draw">
        <div class="panelHead">
          <h2>æŠ½ç±¤ç³»çµ±ï¼ˆåˆ†çµ„/é»å/éš¨æ©ŸæŒ‡æ´¾ï¼‰</h2>
          <span class="badge">æ”¯æ´ï¼šæŠ½ 1 äººï½œéš¨æ©Ÿåˆ†çµ„ï½œæŠ½ç±¤ç´€éŒ„ï½œé¿å…é‡è¤‡</span>
        </div>

        <div class="content">
          <div class="two">
            <div class="block">
              <h3>åå–®è¼¸å…¥</h3>
              <div class="mini">æ¯è¡Œä¸€å€‹åå­—ï¼ˆå¯è²¼å…¨ç­åå–®ï¼‰</div>
              <textarea id="names" placeholder="ä¾‹å¦‚ï¼š&#10;å°æ˜&#10;å°è¯&#10;å°ç¾"></textarea>

              <div class="btnrow">
                <button class="btn btnAccent" id="btn-load-demo">è¼‰å…¥ç¤ºä¾‹åå–®</button>
                <button class="btn btnPrimary" id="btn-save">å„²å­˜åå–®</button>
                <button class="btn btnWarn" id="btn-shuffle">æ´—ç‰Œ</button>
                <button class="btn btnBad" id="btn-clear">æ¸…ç©º</button>
              </div>

              <div class="divider"></div>
              <div class="pill">ç›®å‰äººæ•¸ï¼š<b id="count">0</b></div>
              <div class="pill">å‰©é¤˜å¯æŠ½ï¼š<b id="remain">0</b></div>
            </div>

            <div class="block">
              <h3>æŠ½ç±¤èˆ‡åˆ†çµ„</h3>

              <div class="grid" style="grid-template-columns:1fr 1fr;">
                <div class="card">
                  <h3>æŠ½ 1 äººï¼ˆä¸é‡è¤‡ï¼‰</h3>
                  <p class="mini">é©åˆï¼šéš¨æ©Ÿå›ç­”ã€é»åã€åˆ†æ´¾ä»»å‹™</p>
                  <div class="btnrow">
                    <button class="btn btnAccent" id="btn-draw-one">æŠ½ä¸€ä½</button>
                    <button class="btn btnWarn" id="btn-reset-draw">é‡ç½®æŠ½ç±¤æ± </button>
                  </div>
                </div>

                <div class="card">
                  <h3>éš¨æ©Ÿåˆ†çµ„</h3>
                  <p class="mini">é©åˆï¼šç¬¬äºŒç¯€æ´»å‹•ï¼ˆæ¯çµ„è¨è«–æµç¨‹ç·š/å¡ç‰Œåˆ†é¡ï¼‰</p>
                  <label class="mini" for="groupN" style="display:block;margin-top:10px;">åˆ†æˆå¹¾çµ„ï¼Ÿ</label>
                  <input id="groupN" type="number" min="2" value="6" />
                  <div class="btnrow">
                    <button class="btn btnPrimary" id="btn-make-groups">é–‹å§‹åˆ†çµ„</button>
                  </div>
                </div>
              </div>

              <div class="divider"></div>

              <div class="result" id="drawResult">
                <b>çµæœæœƒé¡¯ç¤ºåœ¨é€™è£¡</b><br/>
                ä½ å¯ä»¥æŠŠåˆ†çµ„çµæœç›´æ¥æˆªåœ–è²¼åˆ°æŠ•å½±ç‰‡æˆ–æŠ•å½±ã€‚
              </div>

              <div class="divider"></div>
              <div class="mini"><b>æŠ½ç±¤ç´€éŒ„</b>ï¼ˆæœ€æ–°åœ¨æœ€ä¸Šæ–¹ï¼‰</div>
              <div class="result" id="history" style="margin-top:8px; max-height: 220px; overflow:auto;"></div>
            </div>
          </div>

          <div class="footer">å°æŠ€å·§ï¼šå¦‚æœä½ è¦ã€Œæ¯çµ„æ´¾ä»£è¡¨ã€â†’ å…ˆåˆ†çµ„ï¼Œå†ç”¨ã€ŒæŠ½ 1 äººã€æŠ½ä»£è¡¨ã€‚</div>
        </div>
      </section>

      <!-- Panel: Resourcesï¼ˆä½ çš„åŸå…§å®¹ä¿ç•™ï¼‰ -->
      <section class="panel hidden" id="panel-resources" role="tabpanel" aria-labelledby="tab-resources">
        <div class="panelHead">
          <h2>è³‡æºèˆ‡é™„ä»¶ï¼ˆé›²ç«¯é€£çµï¼‰</h2>
          <span class="badge">ä¸€éµé–‹å•Ÿï¼šå…¨éƒ¨æª”æ¡ˆè³‡æ–™å¤¾ / æ•™æ¡ˆ PDF</span>
        </div>

        <div class="content">
          <div class="block linkbox">
            <h3>å…¨éƒ¨çš„æª”æ¡ˆä¹‹é›²ç«¯è³‡æ–™å¤¾</h3>
            <div class="mini">
              <a target="_blank" rel="noopener" href="https://drive.google.com/drive/folders/1H9guaPhqdob68ZCJ_7B2Zt1MjgFqyaZD?usp=sharing">
                é–‹å•Ÿ Google Drive è³‡æ–™å¤¾ï¼ˆå…¨éƒ¨æª”æ¡ˆï¼‰
              </a>
            </div>
          </div>

          <div class="block linkbox">
            <h3>æ•™æ¡ˆé€£çµ</h3>
            <div class="mini">
              <a target="_blank" rel="noopener" href="https://drive.google.com/file/d/1xfKf850RuqpK09JC5wDRvmtyEHi8INoU/view?usp=share_link">
                é–‹å•Ÿæ•™æ¡ˆæª”æ¡ˆï¼ˆGoogle Driveï¼‰
              </a>
            </div>
          </div>

          <div class="block">
            <h3>ä½ å¯ä»¥æ”¾çš„é™„ä»¶ï¼ˆå»ºè­°ï¼‰</h3>
            <ul>
              <li>ç‰©å“å¡ï¼ˆå¡‘è† å¸ç®¡ï¼å¡‘è† ç“¶ï¼ç´™å¸ç®¡ï¼é‹ç½ï¼‰åˆ—å°ç‰ˆ</li>
              <li>ç³»çµ±åˆ¤æ–·å¡ï¼ˆâœ”ï¼â–³ï¼âœ˜ï¼‰åˆ—å°ç‰ˆ</li>
              <li>æµç¨‹ç·šåœ–ï¼ˆä½¿ç”¨â†’ä¸Ÿæ£„â†’æ¸…æ½”â†’åˆ†é¡â†’æ©Ÿæ¢°è™•ç†â†’å†è£½ï¼‰</li>
              <li>è³‡æ–™å¡ï¼ˆå®£ç¨± vs è³‡è¨Šï¼‰ï¼‹å­¸ç¿’å–®ï¼ˆå¯æª¢æ ¸å•é¡Œã€æš«æ™‚çµè«–ã€å°è¡Œå‹•ï¼‰</li>
            </ul>
            <div class="divider"></div>
            <div class="mini">
              æé†’ï¼šå¦‚æœä½ åœ¨ GitHub repo ä¹Ÿæƒ³æ”¾åœ–ç‰‡ï¼Œå»ºè­°å»ºç«‹ <code>assets/</code> è³‡æ–™å¤¾ï¼Œç„¶å¾Œç”¨
              <code>&lt;img src=&quot;assets/flow.png&quot;&gt;</code> å¼•ç”¨å³å¯ã€‚
            </div>
          </div>

          <div class="footer">æœ€å¾Œæ›´æ–°ï¼šæœ¬é å·²æ’å…¥ä½ æŒ‡å®šçš„å…©å€‹ Google Drive é€£çµã€‚</div>
        </div>
      </section>
    </div>

    <script>
      // -------------------------------
      // Tabs + hash routing
      // -------------------------------
      const tabs = [
        { key: "lesson", btn: document.getElementById("tab-lesson"), panel: document.getElementById("panel-lesson") },
        { key: "self", btn: document.getElementById("tab-self"), panel: document.getElementById("panel-self") },
        { key: "draw", btn: document.getElementById("tab-draw"), panel: document.getElementById("panel-draw") },
        { key: "resources", btn: document.getElementById("tab-resources"), panel: document.getElementById("panel-resources") },
      ];

      function selectTabByKey(key){
        tabs.forEach(({key: k, btn, panel}) => {
          const on = k === key;
          btn.setAttribute("aria-selected", on ? "true" : "false");
          panel.classList.toggle("hidden", !on);
        });
        location.hash = "#" + key;
      }

      tabs.forEach(({key, btn}) => btn.addEventListener("click", () => selectTabByKey(key)));

      function bootHash(){
        const h = (location.hash || "#lesson").replace("#","");
        if(["lesson","self","draw","resources","flow"].includes(h)){
          if(h === "flow"){
            selectTabByKey("lesson");
            setTimeout(() => {
              const el = document.getElementById("flow");
              if(el) el.scrollIntoView({ behavior:"smooth", block:"start" });
            }, 60);
          }else{
            selectTabByKey(h);
          }
        }else{
          selectTabByKey("lesson");
        }
      }
      window.addEventListener("hashchange", bootHash);
      bootHash();

      // -------------------------------
      // Flow helper buttons
      // -------------------------------
      const btnCopyFlow = document.getElementById("btn-copy-flow");
      const flowCopyResult = document.getElementById("flow-copy-result");
      const flowText = "ä½¿ç”¨ â†’ ä¸Ÿæ£„ â†’ æ¸…æ½” â†’ åˆ†é¡ â†’ æ©Ÿæ¢°è™•ç† â†’ å†è£½";

      if(btnCopyFlow){
        btnCopyFlow.addEventListener("click", async () => {
          try{
            await navigator.clipboard.writeText(flowText);
            flowCopyResult.style.display = "block";
            flowCopyResult.innerHTML = "âœ… å·²è¤‡è£½ï¼š<b>" + flowText + "</b>";
          }catch(e){
            flowCopyResult.style.display = "block";
            flowCopyResult.innerHTML = "âš ï¸ ä½ çš„ç€è¦½å™¨ç¦æ­¢è‡ªå‹•è¤‡è£½ã€‚è«‹æ‰‹å‹•è¤‡è£½ï¼š<b>" + flowText + "</b>";
          }
        });
      }

      const btnJumpDraw = document.getElementById("btn-jump-draw");
      if(btnJumpDraw){
        btnJumpDraw.addEventListener("click", () => selectTabByKey("draw"));
      }

      // -------------------------------
      // è‡ªå­¸é—–é—œï¼ˆlocalStorageï¼‰
      // -------------------------------
      const Q_KEY = "eco_go_true_quest_v1";

      const quests = [
        {
          title: "ç¬¬ 1 é—œï½œé¸ä¸€å€‹ç’°ä¿å®£ç¨±",
          time: "5â€“8 åˆ†é˜",
          points: [
            "å¾é£²æ–™åº—/æ–‡å…·/ç”Ÿæ´»ç”¨å“é¸ä¸€å€‹æ¨™æ¦œã€Œç’°ä¿ã€çš„æ¨™èªæˆ–ç”¢å“",
            "å¯«ä¸‹å®ƒåœ¨èªªä»€éº¼ï¼ˆä¾‹å¦‚ï¼šå¯åˆ†è§£ã€æ¸›å¡‘ã€å‹å–„æµ·æ´‹ï¼‰"
          ]
        },
        {
          title: "ç¬¬ 2 é—œï½œæ‹†æˆå¯æª¢æ ¸å•é¡Œ",
          time: "8â€“10 åˆ†é˜",
          points: [
            "é€™å€‹å®£ç¨±éœ€è¦å“ªäº›è­‰æ“šï¼Ÿ",
            "å®ƒå¯èƒ½åªè¬›äº†å“ªä¸€æ®µï¼ˆè£½é€ /é‹è¼¸/ä½¿ç”¨/ä¸Ÿæ£„ï¼‰ï¼Ÿè‡³å°‘å¯« 2 é¡Œ"
          ]
        },
        {
          title: "ç¬¬ 3 é—œï½œè³‡æ–™å¡é–±è®€",
          time: "10â€“12 åˆ†é˜",
          points: [
            "é–±è®€ 2â€“3 å‰‡è³‡æ–™ï¼ˆè€å¸«æä¾›æˆ–è‡ªè¡Œè’é›†ï¼‰",
            "æ¨™è¨˜ï¼šæ”¯æŒå®£ç¨±çš„è³‡è¨Š / è®“å®£ç¨±è®Šè¤‡é›œçš„è³‡è¨Š"
          ]
        },
        {
          title: "ç¬¬ 4 é—œï½œæš«æ™‚çµè«–",
          time: "5â€“8 åˆ†é˜",
          points: [
            "ç”¨å¥å‹å¯«ä¸‹ï¼šæˆ‘ç›®å‰è¦ºå¾—ï¼¿ï¼¿ï¼Œå› ç‚ºï¼¿ï¼¿ï¼›ä½†æˆ‘é‚„æƒ³çŸ¥é“ï¼¿ï¼¿",
            "é¿å…çµ•å°åŒ–ï¼šä¸æ˜¯éé»‘å³ç™½ï¼Œè€Œæ˜¯æœ‰æ¢ä»¶ã€æœ‰å‰æ"
          ]
        },
        {
          title: "ç¬¬ 5 é—œï½œå°è¡Œå‹•ï¼ˆ1 é€±ï¼‰",
          time: "5â€“8 åˆ†é˜",
          points: [
            "é¸ä¸€å€‹ä½ åšå¾—åˆ°çš„æ”¹è®Šï¼šå°‘è²·ä¸€æ¬¡/æ”¹ç”¨å¯é‡è¤‡ä½¿ç”¨/å…ˆä¸è²·",
            "å¯«ä¸‹ï¼šæˆ‘è¦åšä»€éº¼ï¼Ÿåšå¤šä¹…ï¼Ÿæ€éº¼çŸ¥é“æˆ‘åšåˆ°äº†ï¼Ÿ"
          ]
        },
      ];

      const qGrid = document.getElementById("questGrid");
      const qDone = document.getElementById("q-done");
      const qTotal = document.getElementById("q-total");
      const qBar = document.getElementById("q-bar");
      const qReset = document.getElementById("q-reset");

      function loadQuest(){
        try{
          const raw = localStorage.getItem(Q_KEY);
          const arr = raw ? JSON.parse(raw) : [];
          return Array.isArray(arr) ? arr : [];
        }catch{ return []; }
      }
      function saveQuest(arr){
        localStorage.setItem(Q_KEY, JSON.stringify(arr));
      }

      function renderQuest(){
        const doneArr = loadQuest();
        const doneSet = new Set(doneArr);
        const total = quests.length;
        const doneN = quests.filter((_, i) => doneSet.has(i)).length;

        qTotal.textContent = String(total);
        qDone.textContent = String(doneN);
        qBar.style.width = String(Math.round((doneN / Math.max(1,total)) * 100)) + "%";

        qGrid.innerHTML = quests.map((q, i) => {
          const unlocked = i === 0 || doneSet.has(i - 1);
          const done = doneSet.has(i);
          const stateTag = done ? `<span class="tag ok">å·²å®Œæˆ</span>` : unlocked ? `<span class="tag go">å¯æŒ‘æˆ°</span>` : `<span class="tag lock">æœªè§£é–</span>`;
          const lockClass = unlocked ? "" : "locked";

          const points = q.points.map(p => `<li>${p}</li>`).join("");
          const btnStart = `<button class="btn btnAccent" data-act="start" data-i="${i}" ${unlocked ? "" : "disabled"}>é–‹å§‹ä»»å‹™</button>`;
          const btnDone = `<button class="btn btnPrimary" data-act="done" data-i="${i}" ${unlocked && !done ? "" : "disabled"}>å®Œæˆæœ¬é—œ</button>`;

          return `
            <div class="questCard ${lockClass}">
              <div class="questHead">
                <div class="questTitle">${q.title}</div>
                <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
                  <span class="tag">${q.time}</span>
                  ${stateTag}
                </div>
              </div>
              <ul style="margin-top:8px;">
                ${points}
              </ul>
              <div class="questBtns">
                ${btnStart}
                ${btnDone}
              </div>
            </div>
          `;
        }).join("");
      }

      if(qReset){
        qReset.addEventListener("click", () => {
          localStorage.removeItem(Q_KEY);
          renderQuest();
        });
      }

      if(qGrid){
        qGrid.addEventListener("click", (e) => {
          const btn = e.target.closest("button[data-act]");
          if(!btn) return;

          const act = btn.getAttribute("data-act");
          const i = parseInt(btn.getAttribute("data-i"), 10);
          const doneArr = loadQuest();
          const doneSet = new Set(doneArr);

          const unlocked = i === 0 || doneSet.has(i - 1);
          if(!unlocked) return;

          if(act === "start"){
            // åªæ˜¯æç¤ºï¼Œä¸è·³é 
            alert("é–‹å§‹ä»»å‹™ï¼š\n" + quests[i].title + "\n\nå®Œæˆå¾ŒæŒ‰ã€Œå®Œæˆæœ¬é—œã€è§£é–ä¸‹ä¸€é—œã€‚");
          }

          if(act === "done"){
            if(!doneSet.has(i)){
              doneSet.add(i);
              const next = Array.from(doneSet).sort((a,b)=>a-b);
              saveQuest(next);
              renderQuest();
            }
          }
        });
      }

      // åˆå§‹åŒ–
      renderQuest();

      // -------------------------------
      // æŠ½ç±¤ç³»çµ±ï¼ˆlocalStorage æŒä¹…åŒ–ï¼‰â€” ä½ çš„åŸå…§å®¹ä¿ç•™
      // -------------------------------
      const LS_KEY = "eco_go_true_names_v1";
      const LS_POOL = "eco_go_true_pool_v1";
      const LS_HIS  = "eco_go_true_history_v1";

      const namesBox = document.getElementById("names");
      const countEl = document.getElementById("count");
      const remainEl = document.getElementById("remain");
      const drawResult = document.getElementById("drawResult");
      const historyEl = document.getElementById("history");

      function parseNames(text){
        return text
          .split(/\r?\n/)
          .map(s => s.trim())
          .filter(Boolean)
          .filter((v, i, arr) => arr.indexOf(v) === i);
      }

      function setCounts(all, pool){
        countEl.textContent = String(all.length);
        remainEl.textContent = String(pool.length);
      }

      function saveNames(all){
        localStorage.setItem(LS_KEY, JSON.stringify(all));
      }
      function loadNames(){
        try{
          return JSON.parse(localStorage.getItem(LS_KEY) || "[]");
        }catch{ return []; }
      }

      function savePool(pool){
        localStorage.setItem(LS_POOL, JSON.stringify(pool));
      }
      function loadPool(){
        try{
          return JSON.parse(localStorage.getItem(LS_POOL) || "[]");
        }catch{ return []; }
      }

      function saveHistory(items){
        localStorage.setItem(LS_HIS, JSON.stringify(items));
      }
      function loadHistory(){
        try{
          return JSON.parse(localStorage.getItem(LS_HIS) || "[]");
        }catch{ return []; }
      }

      function renderHistory(){
        const his = loadHistory();
        if(!his.length){
          historyEl.innerHTML = "<span class='mini'>ï¼ˆå°šç„¡ç´€éŒ„ï¼‰</span>";
          return;
        }
        historyEl.innerHTML = his.map(h => `<div>â€¢ ${h}</div>`).join("");
      }

      function shuffle(arr){
        const a = arr.slice();
        for(let i=a.length-1;i>0;i--){
          const j = Math.floor(Math.random()*(i+1));
          [a[i], a[j]] = [a[j], a[i]];
        }
        return a;
      }

      function bootDraw(){
        const all = loadNames();
        const pool = loadPool();
        if(all.length && !pool.length){
          savePool(all.slice());
        }
        namesBox.value = all.join("\n");
        setCounts(all, loadPool());
        renderHistory();
      }

      const btnLoadDemo = document.getElementById("btn-load-demo");
      const btnSave = document.getElementById("btn-save");
      const btnShuffle = document.getElementById("btn-shuffle");
      const btnClear = document.getElementById("btn-clear");
      const btnDrawOne = document.getElementById("btn-draw-one");
      const btnResetDraw = document.getElementById("btn-reset-draw");
      const btnMakeGroups = document.getElementById("btn-make-groups");
      const groupN = document.getElementById("groupN");

      btnLoadDemo.addEventListener("click", () => {
        const demo = ["å°æ˜","å°è¯","å°ç¾","å°å®‰","å°å®‡","å°ç©","å°æ™´","å°å‡±","å°æ©","å°æŸ”","å°åº­","å°å“²"];
        namesBox.value = demo.join("\n");
      });

      btnSave.addEventListener("click", () => {
        const all = parseNames(namesBox.value);
        saveNames(all);
        savePool(all.slice());
        const his = loadHistory();
        his.unshift("ã€ç³»çµ±ã€‘æ›´æ–°åå–®ï¼ˆ" + all.length + " äººï¼‰");
        saveHistory(his.slice(0, 60));
        drawResult.innerHTML = "<b>âœ… å·²å„²å­˜åå–®ä¸¦é‡ç½®æŠ½ç±¤æ± </b>";
        setCounts(all, all.slice());
        renderHistory();
      });

      btnShuffle.addEventListener("click", () => {
        const all = loadNames();
        if(!all.length){
          drawResult.innerHTML = "<b>âš ï¸ å…ˆè¼¸å…¥åå–®ä¸¦æŒ‰ã€Œå„²å­˜åå–®ã€</b>";
          return;
        }
        const pool = shuffle(loadPool().length ? loadPool() : all);
        savePool(pool);
        const his = loadHistory();
        his.unshift("ã€ç³»çµ±ã€‘æ´—ç‰Œå®Œæˆ");
        saveHistory(his.slice(0, 60));
        drawResult.innerHTML = "<b>âœ… å·²æ´—ç‰Œ</b>";
        setCounts(all, pool);
        renderHistory();
      });

      btnClear.addEventListener("click", () => {
        namesBox.value = "";
        localStorage.removeItem(LS_KEY);
        localStorage.removeItem(LS_POOL);
        localStorage.removeItem(LS_HIS);
        drawResult.innerHTML = "<b>ğŸ—‘ï¸ å·²æ¸…ç©ºï¼ˆåå–®/æŠ½ç±¤æ± /ç´€éŒ„ï¼‰</b>";
        setCounts([], []);
        renderHistory();
      });

      btnDrawOne.addEventListener("click", () => {
        const all = loadNames();
        if(!all.length){
          drawResult.innerHTML = "<b>âš ï¸ å…ˆè¼¸å…¥åå–®ä¸¦æŒ‰ã€Œå„²å­˜åå–®ã€</b>";
          return;
        }
        let pool = loadPool();
        if(!pool.length){
          drawResult.innerHTML = "<b>âš ï¸ æŠ½ç±¤æ± å·²ç©ºï¼Œè«‹æŒ‰ã€Œé‡ç½®æŠ½ç±¤æ± ã€</b>";
          return;
        }
        pool = shuffle(pool);
        const pick = pool.shift();
        savePool(pool);

        const his = loadHistory();
        his.unshift("æŠ½åˆ°ï¼š " + pick);
        saveHistory(his.slice(0, 60));

        drawResult.innerHTML = "<b>ğŸ¯ æŠ½åˆ°ï¼š</b> " + pick;
        setCounts(all, pool);
        renderHistory();
      });

      btnResetDraw.addEventListener("click", () => {
        const all = loadNames();
        if(!all.length){
          drawResult.innerHTML = "<b>âš ï¸ å…ˆè¼¸å…¥åå–®ä¸¦æŒ‰ã€Œå„²å­˜åå–®ã€</b>";
          return;
        }
        savePool(all.slice());
        const his = loadHistory();
        his.unshift("ã€ç³»çµ±ã€‘é‡ç½®æŠ½ç±¤æ± ");
        saveHistory(his.slice(0, 60));
        drawResult.innerHTML = "<b>âœ… å·²é‡ç½®æŠ½ç±¤æ± </b>";
        setCounts(all, all.slice());
        renderHistory();
      });

      btnMakeGroups.addEventListener("click", () => {
        const all = loadNames();
        if(!all.length){
          drawResult.innerHTML = "<b>âš ï¸ å…ˆè¼¸å…¥åå–®ä¸¦æŒ‰ã€Œå„²å­˜åå–®ã€</b>";
          return;
        }
        const n = Math.max(2, parseInt(groupN.value || "2", 10));
        const shuffled = shuffle(all);
        const groups = Array.from({length: n}, () => []);
        shuffled.forEach((name, idx) => {
          groups[idx % n].push(name);
        });

        const lines = groups.map((g, i) => `ç¬¬ ${i+1} çµ„ï¼ˆ${g.length}ï¼‰ï¼š${g.join("ã€")}`);
        drawResult.innerHTML = "<b>âœ… åˆ†çµ„å®Œæˆ</b><br/><br/>" + lines.join("<br/>");

        const his = loadHistory();
        his.unshift("ã€åˆ†çµ„ã€‘" + n + " çµ„ï½œ" + new Date().toLocaleString("zh-Hant"));
        saveHistory(his.slice(0, 60));
        renderHistory();
      });

      bootDraw();
    </script>
  </body>
</html>
